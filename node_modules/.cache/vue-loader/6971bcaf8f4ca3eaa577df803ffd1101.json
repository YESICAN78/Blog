{"remainingRequest":"D:\\第三阶段\\第三阶段Vue\\Blog\\Blog\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\第三阶段\\第三阶段Vue\\Blog\\Blog\\src\\components\\Login.vue?vue&type=style&index=0&id=19f5a72f&scoped=true&lang=less&","dependencies":[{"path":"D:\\第三阶段\\第三阶段Vue\\Blog\\Blog\\src\\components\\Login.vue","mtime":1603634858952},{"path":"D:\\第三阶段\\第三阶段Vue\\Blog\\Blog\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\第三阶段\\第三阶段Vue\\Blog\\Blog\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\第三阶段\\第三阶段Vue\\Blog\\Blog\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\第三阶段\\第三阶段Vue\\Blog\\Blog\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\第三阶段\\第三阶段Vue\\Blog\\Blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\第三阶段\\第三阶段Vue\\Blog\\Blog\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5mb3JtLWl0ZW0gew0KICBwYWRkaW5nLXJpZ2h0OiAzMHB4Ow0KfQ0KLnZjb2RlIHsNCiAgdXNlci1zZWxlY3Q6IG5vbmU7DQogIC5lbC1pbnB1dCB7DQogICAgd2lkdGg6IDM1JTsNCiAgICBmbG9hdDogbGVmdDsNCiAgfQ0KICBkaXYuc3ZnIHsNCiAgICB3aWR0aDogMzUlOw0KICAgIGZsb2F0OiBsZWZ0Ow0KICAgIGhlaWdodDogNDBweDsNCiAgICAvZGVlcC8gc3ZnIHsNCiAgICAgIHdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7DQogICAgICBoZWlnaHQ6IDEwMCUgIWltcG9ydGFudDsNCiAgICB9DQogIH0NCiAgLnJlZnJlc2ggew0KICAgIHdpZHRoOiAzMCU7DQogICAgaGVpZ2h0OiA0MHB4Ow0KICAgIGZsb2F0OiBsZWZ0Ow0KICAgIGxpbmUtaGVpZ2h0OiA1MHB4Ow0KICAgIGNvbG9yOiBibHVlOw0KICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgfQ0KfQ0K"},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/components","sourcesContent":["<!-- 登录页面 -->\r\n<template>\r\n  <div>\r\n    <el-dialog title=\"登录\" :visible.sync=\"dialogVisible\" width=\"30%\" :before-close=\"beforeClose\">\r\n      <el-form ref=\"form\" :model=\"form\" label-width=\"80px\" :rules=\"rules\">\r\n        <el-form-item class=\"form-item\" label=\"用户名:\" prop=\"user\">\r\n          <el-input v-model=\"form.user\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item class=\"form-item\" label=\"密码:\" prop=\"password\">\r\n          <el-input v-model=\"form.password\" show-password></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button type=\"primary\" @click=\"handelColse\">立即登录</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport request from \"../api/index\";\r\nconst postLogin = request.postLogin;\r\nconst postifLogin = request.postifLogin;\r\n\r\nexport default {\r\n  name: \"Login\",\r\n  data() {\r\n    return {\r\n      //form表单的数据\r\n      form: {\r\n        user: \"\",\r\n        password: \"\",\r\n      },\r\n      //表单验证数据\r\n      rules: {\r\n        user: [\r\n          //trigger失去焦点触发\r\n          { required: true, message: \"请输入用户名\", trigger: \"blur\" },\r\n          {\r\n            //数据类型\r\n            type: \"string\",\r\n            //正则规则\r\n            pattern: /^[\\w\\u4e00-\\u9fa5\\uac00-\\ud7ff\\u0800-\\u4e00\\-]{2,6}$/,\r\n            trigger: [\"blur\", \"change\"],\r\n          },\r\n        ],\r\n        password: [\r\n          {\r\n            validator: (rule, value, callback) => {\r\n              if (value) {\r\n                if (\r\n                  /^[\\w<>,.?|;':\"{}!@#$%^&*()\\/\\-\\[\\]\\\\]{6,18}$/.test(value)\r\n                ) {\r\n                  callback();\r\n                } else {\r\n                  callback(new Error(\"密码6-18位,不允许出现奇怪的字符\"));\r\n                }\r\n              } else {\r\n                callback(new Error(\"请输入密码\"));\r\n              }\r\n              //在这里还需要验证确认密码的认证\r\n              this.form.checkpassword &&\r\n                this.$refs.form.validateField(\"checkpassword\");\r\n            },\r\n            type: \"string\",\r\n            trigger: [\"blur\", \"change\"],\r\n            required: true,\r\n          },\r\n        ],\r\n      },\r\n    };\r\n  },\r\n  props: [\"dialogVisible\"],\r\n  computed: {},\r\n  methods: {\r\n    //点击登录\r\n    handelColse() {\r\n      this.$refs[\"form\"].validate((valid) => {\r\n        if (valid) {\r\n          //验证通过 发起登录请求\r\n          postLogin(this.form)\r\n            .then((res) => {\r\n              if (res.data.code) {\r\n                //登录失败\r\n                this.$message({\r\n                  message: res.data.msg,\r\n                  type: \"warning\",\r\n                  offset: 100,\r\n                  duration: 1500,\r\n                });\r\n              } else {\r\n                //登录成功\r\n                this.$message({\r\n                  message: res.data.msg,\r\n                  type: \"success\",\r\n                  offset: 100,\r\n                  duration: 1500,\r\n                });\r\n                // 登录成功刷新页面\r\n                setTimeout(() => { \r\n                  postifLogin()\r\n                    .then((res) => {\r\n                      localStorage.setItem(\"userid\", res.data.userInfo._id);\r\n                    })\r\n                  window.location.reload();\r\n                }, 2000);\r\n              }\r\n            })\r\n            .catch((e) => {\r\n              this.$message({\r\n                message: \"登录失败-稍后再试\",\r\n                type: \"error\",\r\n                offset: 100,\r\n                duration: 1500,\r\n              });\r\n            });\r\n        } else {\r\n\r\n        }\r\n      });\r\n    },\r\n    beforeClose() {\r\n      this.$confirm(\"确定关闭🤣?\")\r\n        .then(() => {\r\n          this.$emit(\"handelLogin\");\r\n        })\r\n        .catch(() => {});\r\n    },\r\n  },\r\n\r\n  //生命周期 - 创建完成（访问当前this实例）\r\n  created() {},\r\n  //生命周期 - 挂载完成（访问DOM元素）\r\n  mounted() {},\r\n  destroyed() {},\r\n};\r\n</script>\r\n<style scoped lang='less'>\r\n.form-item {\r\n  padding-right: 30px;\r\n}\r\n.vcode {\r\n  user-select: none;\r\n  .el-input {\r\n    width: 35%;\r\n    float: left;\r\n  }\r\n  div.svg {\r\n    width: 35%;\r\n    float: left;\r\n    height: 40px;\r\n    /deep/ svg {\r\n      width: 100% !important;\r\n      height: 100% !important;\r\n    }\r\n  }\r\n  .refresh {\r\n    width: 30%;\r\n    height: 40px;\r\n    float: left;\r\n    line-height: 50px;\r\n    color: blue;\r\n    cursor: pointer;\r\n  }\r\n}\r\n</style>"]}]}