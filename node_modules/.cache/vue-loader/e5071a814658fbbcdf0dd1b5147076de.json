{"remainingRequest":"D:\\第三阶段\\第三阶段Vue\\Blog\\Blog\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\第三阶段\\第三阶段Vue\\Blog\\Blog\\src\\components\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\第三阶段\\第三阶段Vue\\Blog\\Blog\\src\\components\\Login.vue","mtime":1603634858952},{"path":"D:\\第三阶段\\第三阶段Vue\\Blog\\Blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\第三阶段\\第三阶段Vue\\Blog\\Blog\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\第三阶段\\第三阶段Vue\\Blog\\Blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\第三阶段\\第三阶段Vue\\Blog\\Blog\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgcmVxdWVzdCBmcm9tICIuLi9hcGkvaW5kZXgiOw0KY29uc3QgcG9zdExvZ2luID0gcmVxdWVzdC5wb3N0TG9naW47DQpjb25zdCBwb3N0aWZMb2dpbiA9IHJlcXVlc3QucG9zdGlmTG9naW47DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIkxvZ2luIiwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgLy9mb3Jt6KGo5Y2V55qE5pWw5o2uDQogICAgICBmb3JtOiB7DQogICAgICAgIHVzZXI6ICIiLA0KICAgICAgICBwYXNzd29yZDogIiIsDQogICAgICB9LA0KICAgICAgLy/ooajljZXpqozor4HmlbDmja4NCiAgICAgIHJ1bGVzOiB7DQogICAgICAgIHVzZXI6IFsNCiAgICAgICAgICAvL3RyaWdnZXLlpLHljrvnhKbngrnop6blj5ENCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+36L6T5YWl55So5oi35ZCNIiwgdHJpZ2dlcjogImJsdXIiIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgLy/mlbDmja7nsbvlnosNCiAgICAgICAgICAgIHR5cGU6ICJzdHJpbmciLA0KICAgICAgICAgICAgLy/mraPliJnop4TliJkNCiAgICAgICAgICAgIHBhdHRlcm46IC9eW1x3XHU0ZTAwLVx1OWZhNVx1YWMwMC1cdWQ3ZmZcdTA4MDAtXHU0ZTAwXC1dezIsNn0kLywNCiAgICAgICAgICAgIHRyaWdnZXI6IFsiYmx1ciIsICJjaGFuZ2UiXSwNCiAgICAgICAgICB9LA0KICAgICAgICBdLA0KICAgICAgICBwYXNzd29yZDogWw0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHZhbGlkYXRvcjogKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gew0KICAgICAgICAgICAgICBpZiAodmFsdWUpIHsNCiAgICAgICAgICAgICAgICBpZiAoDQogICAgICAgICAgICAgICAgICAvXltcdzw+LC4/fDsnOiJ7fSFAIyQlXiYqKClcL1wtXFtcXVxcXXs2LDE4fSQvLnRlc3QodmFsdWUpDQogICAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgICBjYWxsYmFjaygpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoIuWvhueggTYtMTjkvY0s5LiN5YWB6K645Ye6546w5aWH5oCq55qE5a2X56ymIikpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoIuivt+i+k+WFpeWvhueggSIpKTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAvL+WcqOi/memHjOi/mOmcgOimgemqjOivgeehruiupOWvhueggeeahOiupOivgQ0KICAgICAgICAgICAgICB0aGlzLmZvcm0uY2hlY2twYXNzd29yZCAmJg0KICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMuZm9ybS52YWxpZGF0ZUZpZWxkKCJjaGVja3Bhc3N3b3JkIik7DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgdHlwZTogInN0cmluZyIsDQogICAgICAgICAgICB0cmlnZ2VyOiBbImJsdXIiLCAiY2hhbmdlIl0sDQogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwNCiAgICAgICAgICB9LA0KICAgICAgICBdLA0KICAgICAgfSwNCiAgICB9Ow0KICB9LA0KICBwcm9wczogWyJkaWFsb2dWaXNpYmxlIl0sDQogIGNvbXB1dGVkOiB7fSwNCiAgbWV0aG9kczogew0KICAgIC8v54K55Ye755m75b2VDQogICAgaGFuZGVsQ29sc2UoKSB7DQogICAgICB0aGlzLiRyZWZzWyJmb3JtIl0udmFsaWRhdGUoKHZhbGlkKSA9PiB7DQogICAgICAgIGlmICh2YWxpZCkgew0KICAgICAgICAgIC8v6aqM6K+B6YCa6L+HIOWPkei1t+eZu+W9leivt+axgg0KICAgICAgICAgIHBvc3RMb2dpbih0aGlzLmZvcm0pDQogICAgICAgICAgICAudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5jb2RlKSB7DQogICAgICAgICAgICAgICAgLy/nmbvlvZXlpLHotKUNCiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlcy5kYXRhLm1zZywNCiAgICAgICAgICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwNCiAgICAgICAgICAgICAgICAgIG9mZnNldDogMTAwLA0KICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDE1MDAsDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgLy/nmbvlvZXmiJDlip8NCiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlcy5kYXRhLm1zZywNCiAgICAgICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwNCiAgICAgICAgICAgICAgICAgIG9mZnNldDogMTAwLA0KICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDE1MDAsDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgLy8g55m75b2V5oiQ5Yqf5Yi35paw6aG16Z2iDQogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7IA0KICAgICAgICAgICAgICAgICAgcG9zdGlmTG9naW4oKQ0KICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInVzZXJpZCIsIHJlcy5kYXRhLnVzZXJJbmZvLl9pZCk7DQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7DQogICAgICAgICAgICAgICAgfSwgMjAwMCk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAuY2F0Y2goKGUpID0+IHsNCiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICAgICAgbWVzc2FnZTogIueZu+W9leWksei0pS3nqI3lkI7lho3or5UiLA0KICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsDQogICAgICAgICAgICAgICAgb2Zmc2V0OiAxMDAsDQogICAgICAgICAgICAgICAgZHVyYXRpb246IDE1MDAsDQogICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0gZWxzZSB7DQoNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICBiZWZvcmVDbG9zZSgpIHsNCiAgICAgIHRoaXMuJGNvbmZpcm0oIuehruWumuWFs+mXrfCfpKM/IikNCiAgICAgICAgLnRoZW4oKCkgPT4gew0KICAgICAgICAgIHRoaXMuJGVtaXQoImhhbmRlbExvZ2luIik7DQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaCgoKSA9PiB7fSk7DQogICAgfSwNCiAgfSwNCg0KICAvL+eUn+WRveWRqOacnyAtIOWIm+W7uuWujOaIkO+8iOiuv+mXruW9k+WJjXRoaXPlrp7kvovvvIkNCiAgY3JlYXRlZCgpIHt9LA0KICAvL+eUn+WRveWRqOacnyAtIOaMgui9veWujOaIkO+8iOiuv+mXrkRPTeWFg+e0oO+8iQ0KICBtb3VudGVkKCkge30sDQogIGRlc3Ryb3llZCgpIHt9LA0KfTsNCg=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAoBA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/components","sourcesContent":["<!-- 登录页面 -->\r\n<template>\r\n  <div>\r\n    <el-dialog title=\"登录\" :visible.sync=\"dialogVisible\" width=\"30%\" :before-close=\"beforeClose\">\r\n      <el-form ref=\"form\" :model=\"form\" label-width=\"80px\" :rules=\"rules\">\r\n        <el-form-item class=\"form-item\" label=\"用户名:\" prop=\"user\">\r\n          <el-input v-model=\"form.user\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item class=\"form-item\" label=\"密码:\" prop=\"password\">\r\n          <el-input v-model=\"form.password\" show-password></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button type=\"primary\" @click=\"handelColse\">立即登录</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport request from \"../api/index\";\r\nconst postLogin = request.postLogin;\r\nconst postifLogin = request.postifLogin;\r\n\r\nexport default {\r\n  name: \"Login\",\r\n  data() {\r\n    return {\r\n      //form表单的数据\r\n      form: {\r\n        user: \"\",\r\n        password: \"\",\r\n      },\r\n      //表单验证数据\r\n      rules: {\r\n        user: [\r\n          //trigger失去焦点触发\r\n          { required: true, message: \"请输入用户名\", trigger: \"blur\" },\r\n          {\r\n            //数据类型\r\n            type: \"string\",\r\n            //正则规则\r\n            pattern: /^[\\w\\u4e00-\\u9fa5\\uac00-\\ud7ff\\u0800-\\u4e00\\-]{2,6}$/,\r\n            trigger: [\"blur\", \"change\"],\r\n          },\r\n        ],\r\n        password: [\r\n          {\r\n            validator: (rule, value, callback) => {\r\n              if (value) {\r\n                if (\r\n                  /^[\\w<>,.?|;':\"{}!@#$%^&*()\\/\\-\\[\\]\\\\]{6,18}$/.test(value)\r\n                ) {\r\n                  callback();\r\n                } else {\r\n                  callback(new Error(\"密码6-18位,不允许出现奇怪的字符\"));\r\n                }\r\n              } else {\r\n                callback(new Error(\"请输入密码\"));\r\n              }\r\n              //在这里还需要验证确认密码的认证\r\n              this.form.checkpassword &&\r\n                this.$refs.form.validateField(\"checkpassword\");\r\n            },\r\n            type: \"string\",\r\n            trigger: [\"blur\", \"change\"],\r\n            required: true,\r\n          },\r\n        ],\r\n      },\r\n    };\r\n  },\r\n  props: [\"dialogVisible\"],\r\n  computed: {},\r\n  methods: {\r\n    //点击登录\r\n    handelColse() {\r\n      this.$refs[\"form\"].validate((valid) => {\r\n        if (valid) {\r\n          //验证通过 发起登录请求\r\n          postLogin(this.form)\r\n            .then((res) => {\r\n              if (res.data.code) {\r\n                //登录失败\r\n                this.$message({\r\n                  message: res.data.msg,\r\n                  type: \"warning\",\r\n                  offset: 100,\r\n                  duration: 1500,\r\n                });\r\n              } else {\r\n                //登录成功\r\n                this.$message({\r\n                  message: res.data.msg,\r\n                  type: \"success\",\r\n                  offset: 100,\r\n                  duration: 1500,\r\n                });\r\n                // 登录成功刷新页面\r\n                setTimeout(() => { \r\n                  postifLogin()\r\n                    .then((res) => {\r\n                      localStorage.setItem(\"userid\", res.data.userInfo._id);\r\n                    })\r\n                  window.location.reload();\r\n                }, 2000);\r\n              }\r\n            })\r\n            .catch((e) => {\r\n              this.$message({\r\n                message: \"登录失败-稍后再试\",\r\n                type: \"error\",\r\n                offset: 100,\r\n                duration: 1500,\r\n              });\r\n            });\r\n        } else {\r\n\r\n        }\r\n      });\r\n    },\r\n    beforeClose() {\r\n      this.$confirm(\"确定关闭🤣?\")\r\n        .then(() => {\r\n          this.$emit(\"handelLogin\");\r\n        })\r\n        .catch(() => {});\r\n    },\r\n  },\r\n\r\n  //生命周期 - 创建完成（访问当前this实例）\r\n  created() {},\r\n  //生命周期 - 挂载完成（访问DOM元素）\r\n  mounted() {},\r\n  destroyed() {},\r\n};\r\n</script>\r\n<style scoped lang='less'>\r\n.form-item {\r\n  padding-right: 30px;\r\n}\r\n.vcode {\r\n  user-select: none;\r\n  .el-input {\r\n    width: 35%;\r\n    float: left;\r\n  }\r\n  div.svg {\r\n    width: 35%;\r\n    float: left;\r\n    height: 40px;\r\n    /deep/ svg {\r\n      width: 100% !important;\r\n      height: 100% !important;\r\n    }\r\n  }\r\n  .refresh {\r\n    width: 30%;\r\n    height: 40px;\r\n    float: left;\r\n    line-height: 50px;\r\n    color: blue;\r\n    cursor: pointer;\r\n  }\r\n}\r\n</style>"]}]}